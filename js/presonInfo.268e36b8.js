webpackJsonp([2],{0:function(e,t,o){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a={isNull:function(e){for(var t=!1,o=0;o<e.length;o++){if(null==sessionStorage.getItem(e[o].id)||""==sessionStorage.getItem(e[o].id)){t=!1,alert(e[o].text+"不能为空！");break}t=!0}return t},showErr:function(e,t){$(e).siblings(".err").text(t).css({display:"block"})},hideErr:function(e){$(e).siblings(".err").text("").css({display:"none"})},colseImg:function(e){$(e).parent().parent().siblings().find("input").val(""),$(e).siblings().find("img").attr("src",""),$(e).siblings("a").attr("href",""),$(e).parent().siblings(".showTip").css({display:"block"}),$(e).parent().css({display:"none"})},updataImg:function(e,t){if(0!=e.files.length)return new Promise(function(t,o){lrz(e.files[0],{width:400}).then(function(a){$.ajax({url:"/upload/",type:"POST",data:a.formData,dataType:"json",async:!0,cache:!1,contentType:!1,processData:!1,success:function(a){"0"==a.result?($(e).parent().siblings().find(".showImg img").attr("src",a.url),$(e).parent().siblings().find(".showImg a").attr("href",a.url),$(e).parent().siblings().find(".showTip").css({display:"none"}),$(e).parent().siblings().find(".showImg").css({display:"block"}),t(a.url)):o(!1)},error:function(e){o(!1),console.log(e)}})}).catch(function(e){o(!1),console.log("lrz"+e)}).always(function(){})})}};t.default=a},14:function(e,t,o){"use strict";function a(){for(var e={},t=0,o=window.sessionStorage,a=0;a<o.length;a++)"p_bankCard"!=o.key(a)&&"p_corporateIdCard"!=o.key(a)&&"p_corporateIdCardBack"!=o.key(a)&&"p_corporateIdCardHold"!=o.key(a)||("p_bankCard"==o.key(a)&&(e["agentCertificates["+t+"].typeId"]=11),"p_corporateIdCard"==o.key(a)&&(e["agentCertificates["+t+"].typeId"]=8),"p_corporateIdCardBack"==o.key(a)&&(e["agentCertificates["+t+"].typeId"]=9),"p_corporateIdCardHold"==o.key(a)&&(e["agentCertificates["+t+"].typeId"]=10),e["agentCertificates["+t+"].certificateUrl"]=o.getItem(o.key(a)),sessionStorage.getItem("modify")&&(e["agentCertificates["+t+"].id"]=o.getItem(o.key(a)+"_id"),e["agentCertificates["+t+"].agentId"]=o.getItem(o.key(a)+"_agentId")),t++);sessionStorage.getItem("modify")&&(e.id=o.getItem("id")),e.agentType=o.getItem("agentType"),e.agentName=o.getItem("agentName"),e.address=o.getItem("address"),e.mobilePhone=o.getItem("mobilePhone"),e.region=o.getItem("region"),e.contact=o.getItem("contact"),e.contactPhone=o.getItem("contactPhone"),e.email=o.getItem("email"),e.legalPerson=o.getItem("p_legalPerson"),e.identityCard=o.getItem("p_identityCard"),e.certificateValidPeriod=o.getItem("p_certificateValidPeriod"),e.bankName=o.getItem("p_bankName"),e.bankCartNo=o.getItem("p_bankCartNo"),e.accountHolder=o.getItem("p_accountHolder"),e.source=o.getItem("source"),null!=o.getItem("inviteCode")&&""!=o.getItem("inviteCode")&&(e.inviteCode=o.getItem("inviteCode"));var n={};n=o.getItem("tokenId")?{"content-type":"application/x-www-form-urlencoded; charset=UTF-8",token:o.getItem("tokenId")}:{"content-type":"application/x-www-form-urlencoded; charset=UTF-8"},$.ajax({url:"/h5/wap/apply/agent",type:"POST",data:e,headers:n,dataType:"JSON",beforeSend:function(){$("#presonInfoBtn").val("提交信息中...").attr("disabled",!0)},success:function(e){console.log(e),"0"==e.result?sessionStorage.getItem("tokenId")?alert("修改成功！"):(window.location.href="success.html",sessionStorage.clear()):alert(e.msg),$("#presonInfoBtn").val("提交").removeAttr("disabled")},error:function(e){$("#presonInfoBtn").val("提交").removeAttr("disabled"),console.log(e)}})}o(1);var n=o(0),s=function(e){return e&&e.__esModule?e:{default:e}}(n);$(document).ready(function(){null!=sessionStorage.getItem("source")&&""!=sessionStorage.getItem("source")||(window.location.href="index.html"),sessionStorage.getItem("modify")?($("title").html(sessionStorage.getItem("titleName")+"详情"),$("#tipFit").hide(),$("#presonInfoBtn").hide(),$("input[type=text],input[type=number],input[type=email],input[type=file]").attr("disabled",!0),$(".mobileSelect").css("display","none"),$(".closeBtn").css("display","none")):($("#tipFit").show(),$("#presonInfoBtn").show(),$("#tipFit").text(sessionStorage.getItem("sessionRate"))),(new LCalendar).init({trigger:"#p_certificateValidPeriod",type:"date",closeFn:function(e){if(console.log($(e).val()),new Date>new Date(Date.parse($(e).val())))return $(e).siblings(".err").css({display:"block"}).text("日期不能小于或等于今天！"),$(e).val(""),void sessionStorage.setItem("p_certificateValidPeriod","");$(e).siblings(".err").css({display:"none"}).text(""),sessionStorage.setItem("p_certificateValidPeriod",$(e).val())}});var e=window.sessionStorage;if(e.length>0)for(var t=0;t<e.length;t++)"p_legalPerson"!=e.key(t)&&"p_identityCard"!=e.key(t)&&"p_certificateValidPeriod"!=e.key(t)&&"p_bankName"!=e.key(t)&&"p_bankCartNo"!=e.key(t)&&"p_accountHolder"!=e.key(t)||$("#"+e.key(t)).val(e.getItem(e.key(t))),"p_bankCard"!=e.key(t)&&"p_corporateIdCard"!=e.key(t)&&"p_corporateIdCardBack"!=e.key(t)&&"p_corporateIdCardHold"!=e.key(t)||($("#"+e.key(t)).parent().siblings().find(".showImg img").attr("src",e.getItem(e.key(t))),$("#"+e.key(t)).parent().siblings().find(".showImg a").attr("href",e.getItem(e.key(t))),$("#"+e.key(t)).parent().siblings().find(".showTip").css({display:"none"}),$("#"+e.key(t)).parent().siblings().find(".showImg").css({display:"block"}))}),$("#presonInfoBtn").on("click",function(){return null==sessionStorage.getItem("p_legalPerson")||""==sessionStorage.getItem("p_legalPerson")?void alert("姓名不能为空！"):null==sessionStorage.getItem("p_identityCard")||""==sessionStorage.getItem("p_identityCard")?void alert("身份证号不能为空！"):null==sessionStorage.getItem("p_certificateValidPeriod")||""==sessionStorage.getItem("p_certificateValidPeriod")?void alert("证件有效期不能为空！"):null==sessionStorage.getItem("p_bankName")||""==sessionStorage.getItem("p_bankName")?void alert("开户银行不能为空！"):null==sessionStorage.getItem("p_bankCartNo")||""==sessionStorage.getItem("p_bankCartNo")?void alert("收款账号不能为空！"):null==sessionStorage.getItem("p_accountHolder")||""==sessionStorage.getItem("p_accountHolder")?void alert("收款户名不能为空！"):null==sessionStorage.getItem("p_bankCard")||""==sessionStorage.getItem("p_bankCard")?void alert("银行卡不能为空！"):null==sessionStorage.getItem("p_corporateIdCard")||""==sessionStorage.getItem("p_corporateIdCard")?void alert("证件照正面不能为空！"):null==sessionStorage.getItem("p_corporateIdCardBack")||""==sessionStorage.getItem("p_corporateIdCardBack")?void alert("证件照反面不能为空！"):null==sessionStorage.getItem("p_corporateIdCardHold")||""==sessionStorage.getItem("p_corporateIdCardHold")?void alert("法人手持身份证正面不能为空！"):void a()}),$(document).on("input propertychange","#p_legalPerson,#p_bankName,#p_bankCartNo,#p_accountHolder",function(e){("input"===e.type||"value"===e.orignalEvent.propertyName)&&""!=this.value?($(this).siblings(".err").css({display:"none"}).text(""),sessionStorage.setItem(e.target.id,this.value)):($(this).siblings(".err").css({display:"block"}).text(e.target.name+"不能为空！"),sessionStorage.setItem(e.target.id,""))}),$(document).on("input propertychange","#p_identityCard",function(e){if("input"===e.type||"value"===e.orignalEvent.propertyName){var t=/^[1-9]\d{7}((0\d)|(1[0-2]))(([0|1|2]\d)|3[0-1])\d{3}$/,o=/^[1-9]\d{5}[1-9]\d{3}((0\d)|(1[0-2]))(([0|1|2]\d)|3[0-1])\d{3}([0-9]|X)$/;t.test(this.value)||o.test(this.value)?($(this).siblings(".err").css({display:"none"}).text(""),sessionStorage.setItem(e.target.id,this.value)):($(this).siblings(".err").css({display:"block"}).text("请输入正确的身份证号！"),sessionStorage.setItem(e.target.id,""))}else $(this).siblings(".err").css({display:"block"}).text("请输入正确的身份证号！"),sessionStorage.setItem(e.target.id,"")}),$("#bcClick").on("click",function(){$("#p_bankCard")[0].click()}),$("#p_bankCard").on("change",function(){s.default.updataImg(this,"uploadForm1").then(function(e){e&&sessionStorage.setItem("p_bankCard",e)})}),$("#cdfClick").on("click",function(){$("#p_corporateIdCard")[0].click()}),$("#p_corporateIdCard").on("change",function(){s.default.updataImg(this,"uploadForm2").then(function(e){e&&sessionStorage.setItem("p_corporateIdCard",e)})}),$("#cdbClick").on("click",function(){$("#p_corporateIdCardBack")[0].click()}),$("#p_corporateIdCardBack").on("change",function(){s.default.updataImg(this,"uploadForm3").then(function(e){e&&sessionStorage.setItem("p_corporateIdCardBack",e)})}),$("#cdhClick").on("click",function(){$("#p_corporateIdCardHold")[0].click()}),$("#p_corporateIdCardHold").on("change",function(){s.default.updataImg(this,"uploadForm4").then(function(e){e&&sessionStorage.setItem("p_corporateIdCardHold",e)})}),$(".closeBtn").on("click",function(){sessionStorage.setItem($(this).attr("name"),""),s.default.colseImg(this)})}},[14]);