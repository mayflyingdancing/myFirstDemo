webpackJsonp([1],{0:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i={isNull:function(e){for(var t=!1,n=0;n<e.length;n++){if(null==sessionStorage.getItem(e[n].id)||""==sessionStorage.getItem(e[n].id)){t=!1,alert(e[n].text+"不能为空！");break}t=!0}return t},showErr:function(e,t){$(e).siblings(".err").text(t).css({display:"block"})},hideErr:function(e){$(e).siblings(".err").text("").css({display:"none"})},colseImg:function(e){$(e).parent().parent().siblings().find("input").val(""),$(e).siblings().find("img").attr("src",""),$(e).siblings("a").attr("href",""),$(e).parent().siblings(".showTip").css({display:"block"}),$(e).parent().css({display:"none"})},updataImg:function(e,t){if(0!=e.files.length)return new Promise(function(t,n){lrz(e.files[0],{width:400}).then(function(i){$.ajax({url:"/upload/",type:"POST",data:i.formData,dataType:"json",async:!0,cache:!1,contentType:!1,processData:!1,success:function(i){"0"==i.result?($(e).parent().siblings().find(".showImg img").attr("src",i.url),$(e).parent().siblings().find(".showImg a").attr("href",i.url),$(e).parent().siblings().find(".showTip").css({display:"none"}),$(e).parent().siblings().find(".showImg").css({display:"block"}),t(i.url)):n(!1)},error:function(e){n(!1),console.log(e)}})}).catch(function(e){n(!1),console.log("lrz"+e)}).always(function(){})})}};t.default=i},12:function(e,t,n){"use strict";function i(){for(var e={},t=0,n=window.sessionStorage,i=0;i<n.length;i++)"businessLicense"!=n.key(i)&&"corporateIdCard"!=n.key(i)&&"corporateIdCardBack"!=n.key(i)&&"corporateIdCardHold"!=n.key(i)&&"bankLicense"!=n.key(i)&&"bankCard"!=n.key(i)&&"certificateLicense"!=n.key(i)||("businessLicense"==n.key(i)&&(e["agentCertificates["+t+"].typeId"]=7),"corporateIdCard"==n.key(i)&&(e["agentCertificates["+t+"].typeId"]=19),"corporateIdCardBack"==n.key(i)&&(e["agentCertificates["+t+"].typeId"]=20),"corporateIdCardHold"==n.key(i)&&(e["agentCertificates["+t+"].typeId"]=35),"bankLicense"==n.key(i)&&(e["agentCertificates["+t+"].typeId"]=3),"bankCard"==n.key(i)&&(e["agentCertificates["+t+"].typeId"]=11),"certificateLicense"==n.key(i)&&(e["agentCertificates["+t+"].typeId"]=39),e["agentCertificates["+t+"].certificateUrl"]=n.getItem(n.key(i)),sessionStorage.getItem("modify")&&(e["agentCertificates["+t+"].id"]=n.getItem(n.key(i)+"_id"),e["agentCertificates["+t+"].agentId"]=n.getItem(n.key(i)+"_agentId")),t++);sessionStorage.getItem("modify")&&(e.id=n.getItem("id")),e.agentType=n.getItem("agentType"),e.agentName=n.getItem("agentName"),e.address=n.getItem("address"),e.mobilePhone=n.getItem("mobilePhone"),e.region=n.getItem("region"),e.contact=n.getItem("contact"),e.contactPhone=n.getItem("contactPhone"),e.email=n.getItem("email"),e.legalPerson=n.getItem("legalPerson"),e.identityCard=n.getItem("identityCard"),e.certificateValidPeriod=n.getItem("certificateValidPeriod"),e.bankCartNo=n.getItem("bankCartNo"),e.accountHolder=n.getItem("accountHolder"),e.agentShortName=n.getItem("agentShortName"),e.industryId=n.getItem("industryId"),e.bankName=n.getItem("bankName"),e.socialCreditCode=n.getItem("socialCreditCode"),e.source=n.getItem("source"),null!=n.getItem("inviteCode")&&""!=n.getItem("inviteCode")&&(e.inviteCode=n.getItem("inviteCode"));var s={};s=n.getItem("tokenId")?{"content-type":"application/x-www-form-urlencoded; charset=UTF-8",token:n.getItem("tokenId")}:{"content-type":"application/x-www-form-urlencoded; charset=UTF-8"},$.ajax({url:"/h5/wap/apply/agent",type:"POST",data:e,headers:s,dataType:"JSON",beforeSend:function(){$("#settlementBtn").val("提交信息中...").attr("disabled",!0)},success:function(e){if(console.log(e),"0"==e.result)if(sessionStorage.getItem("tokenId")){var t=confirm("修改成功！");1==t&&wx.miniProgram.redirectTo({url:"/pages/index/index"})}else window.location.href="success.html",sessionStorage.clear();else{1==confirm("修改成功！")&&wx.miniProgram.redirectTo({url:"/pages/index/index"}),alert(e.msg)}$("#settlementBtn").val("提交").removeAttr("disabled")},error:function(e){$("#settlementBtn").val("提交").removeAttr("disabled"),console.log(e)}})}n(1);var s=n(0),a=function(e){return e&&e.__esModule?e:{default:e}}(s);$(document).ready(function(){null!=sessionStorage.getItem("source")&&""!=sessionStorage.getItem("source")||(window.location.href="index.html"),sessionStorage.getItem("modify")?($("title").html(sessionStorage.getItem("titleName")+"详情"),$("#tipFit").hide(),$("#settlementBtn").hide(),$("input[type=text],input[type=number],input[type=email],input[type=file]").attr("disabled",!0),$(".mobileSelect").css("display","none"),$(".closeBtn").css("display","none")):($("#tipFit").show(),$("#settlementBtn").show(),$("#tipFit").text(sessionStorage.getItem("sessionRate")));var e=window.sessionStorage;if(e.length>0)for(var t=0;t<e.length;t++)"bankName"!=e.key(t)&&"bankCartNo"!=e.key(t)&&"accountHolder"!=e.key(t)||$("#"+e.key(t)).val(e.getItem(e.key(t))),"bankLicense"!=e.key(t)&&"bankCard"!=e.key(t)&&"certificateLicense"!=e.key(t)||($("#"+e.key(t)).parent().siblings().find(".showImg img").attr("src",e.getItem(e.key(t))),$("#"+e.key(t)).parent().siblings().find(".showImg a").attr("href",e.getItem(e.key(t))),$("#"+e.key(t)).parent().siblings().find(".showTip").css({display:"none"}),$("#"+e.key(t)).parent().siblings().find(".showImg").css({display:"block"}))}),$("#settlementBtn").on("click",function(){return null==sessionStorage.getItem("bankName")||""==sessionStorage.getItem("bankName")?void alert("开户银行不能为空！"):null==sessionStorage.getItem("bankCartNo")||""==sessionStorage.getItem("bankCartNo")?void alert("收款账号不能为空！"):null==sessionStorage.getItem("accountHolder")||""==sessionStorage.getItem("accountHolder")?void alert("收款户名不能为空！"):null!=sessionStorage.getItem("bankLicense")&&""!=sessionStorage.getItem("bankLicense")||null!=sessionStorage.getItem("bankCard")&&""!=sessionStorage.getItem("bankCard")||null!=sessionStorage.getItem("certificateLicense")&&""!=sessionStorage.getItem("certificateLicense")?void i():void alert("请上传开户许可证或银行卡正面或法人手持收款授权书！")}),$(document).on("input propertychange","#bankName,#bankCartNo,#accountHolder",function(e){("input"===e.type||"value"===e.orignalEvent.propertyName)&&""!=this.value?($(this).siblings(".err").css({display:"none"}).text(""),sessionStorage.setItem(e.target.id,this.value)):($(this).siblings(".err").css({display:"block"}).text(e.target.name+"不能为空！"),sessionStorage.setItem(e.target.id,""))}),$("#bklClick").on("click",function(){$("#bankLicense")[0].click()}),$("#bankLicense").on("change",function(){a.default.updataImg(this,"uploadForm1").then(function(e){e&&sessionStorage.setItem("bankLicense",e)})}),$("#bcClick").on("click",function(){$("#bankCard")[0].click()}),$("#bankCard").on("change",function(){a.default.updataImg(this,"uploadForm2").then(function(e){e&&sessionStorage.setItem("bankCard",e)})}),$("#clClick").on("click",function(){$("#certificateLicense")[0].click()}),$("#certificateLicense").on("change",function(){a.default.updataImg(this,"uploadForm3").then(function(e){e&&sessionStorage.setItem("certificateLicense",e)})}),$(".closeBtn").on("click",function(){sessionStorage.setItem($(this).attr("name"),""),a.default.colseImg(this)})}},[12]);